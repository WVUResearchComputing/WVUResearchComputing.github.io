

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python Language &mdash; WVU-RC 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'1.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="R Language" href="43.R.html" />
    <link rel="prev" title="Singularity Containers" href="41.Singularity.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> WVU-RC
          

          
            
            <img src="../_static/ResearchComputing.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="10.Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="20.QuickStart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="30.BasicUser.html">For Basic Users</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="40.AdvancedUser.html">For Advanced Users</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="41.Singularity.html">Singularity Containers</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Python Language</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#red-hat-linux-native-python">Red Hat Linux Native Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-from-environment-modules">Python from environment Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packages-included">Packages included</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-python-packages-as-user-with-pip">Installing python packages as user with pip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-python-packages-with-a-custom-prefix">Installing python packages with a custom prefix</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#virtual-environments">Virtual Environments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installing-r-packages-in-default-directories">Installing R Packages in default Directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-r-packages-in-non-default-directories">Installing R Packages in non-default directories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-install-packages">Using install.packages()</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-r-cmd-install">Using R CMD INSTALL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-installed-packages-from-non-default-directories">Using Installed Packages from non-default directories</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#python-virtual-environments">Python Virtual Environments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-virtual-environments-with-python2">Using Virtual Environments with python2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-virtual-environments-with-python3">Using Virtual Environments with python3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#activating-virtual-environments-using-the-c-shell">Activating virtual environments using the C shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-site-wide-system-packages">Using site-wide system packages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Python Virtual Environments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">Using Virtual Environments with python2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Using Virtual Environments with python3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Activating virtual environments using the C shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Using site-wide system packages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="43.R.html">R Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="44.Perl.html">Perl Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="45.Conda.html">Conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="46.GPU.html">GPU Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="47.Modules.html">Environment Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="48.Jupyter.html">Jupyter Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="49.Matlab.html">MATLAB</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="50.Developers.html">For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="60.Administrators.html">For Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="70.DomainSpecific.html">Domain Specific Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="80.ClusterSpecific.html">Clusters Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="90.References.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">WVU-RC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="40.AdvancedUser.html">For Advanced Users</a> &raquo;</li>
        
      <li>Python Language</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/text/42.Python.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python-language">
<span id="ad-python"></span><h1>Python Language<a class="headerlink" href="#python-language" title="Permalink to this headline">¶</a></h1>
<p>Python is an interpreted, high-level, general-purpose programming language. Created by Guido van Rossum and first released in 1991, Python’s design philosophy emphasizes code readability with its notable use of significant whitespace. Its language constructs and object-oriented approach aim to help programmers write clear, logical code for small and large-scale projects.</p>
<p>Due to Python’s extensive mathematics library, and the third-party library NumPy that further extends the native capabilities, it is frequently used as a scientific scripting language to aid in problems such as numerical data processing and manipulation.</p>
<p>Libraries such as NumPy, SciPy and Matplotlib allow the effective use of Python in scientific computing, with specialized libraries such as Biopython and Astropy providing domain-specific functionality. Python is commonly used in artificial intelligence projects with the help of libraries like TensorFlow, Keras and Scikit-learn. As a scripting language with modular architecture, simple syntax and rich text processing tools, Python is often used for natural language processing.</p>
<p>Both clusters, Spruce and Thorny offer a variety of Python implementations and versions.</p>
<p>This section shows some of them and why is important to know where and how activate the different python environments.</p>
<div class="section" id="red-hat-linux-native-python">
<h2>Red Hat Linux Native Python<a class="headerlink" href="#red-hat-linux-native-python" title="Permalink to this headline">¶</a></h2>
<p>Python 2.x comes by default with RedHat Enterprise Linux (RHEL).
In the case of Spruce the current version of RHEL is 6.10 and on Thorny the
version of RHEL is 7.6.</p>
<p>Notice that by default RHEL only includes Python 2.x versions. In the case of Spruce
the Python version is 2.6.6 and on Thorny is 2.7.5</p>
<p>For scientific applications the Python versions on Spruce and Thorny are very outdated in particular on Spruce.
Most scientific applications written in Python demands at least version 2.7.
Python 2.7 will not be maintained past 2020 and a number of critical Python projects have pledged to stop supporting Python 2 soon.</p>
<p>From another side, despite of Python being installed by default on RHEL most scientific packages are not installed.
This is another reason to not use the Python install with the OS and instead use one of environment modules for Python.</p>
</div>
<div class="section" id="python-from-environment-modules">
<h2>Python from environment Modules<a class="headerlink" href="#python-from-environment-modules" title="Permalink to this headline">¶</a></h2>
<p>On Spruce and Thorny offer a variety of environment modules with Python.
They include a good variety of scientific computing packages preinstalled.
The tables below describe the modules available on Spruce and Thorny</p>
<table border="1" class="docutils">
<colgroup>
<col width="66%" />
<col width="18%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Environment Module</th>
<th class="head">Spruce</th>
<th class="head">Thorny</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>lang/python/2.7.15_gcc82</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>lang/python/3.6.8_gcc82</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>lang/python/3.7.2_gcc82</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>lang/python/cpython_3.6.9_gcc82</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>lang/python/cpython_3.7.2_gcc82</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>lang/python/cpython_3.7.4_gcc82</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>lang/python/intelpython_3.6.3</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>lang/python/intelpython_2.7.15</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>lang/python/pypy2.7-7.1.1-portable</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>lang/python/pypy3.6-7.1.1-portable</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>lang/python/pypy3.6-v7.1.1-thorny</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The modules indicated with <code class="docutils literal"><span class="pre">_gcc82</span></code> where compiled with GCC 8.2.0 so the
module <code class="docutils literal"><span class="pre">lang/gcc/8.2.0</span></code> must be preloaded in to activate the corresponding
Python module. For example to load <code class="docutils literal"><span class="pre">lang/python/cpython_3.7.4_gcc82</span></code> you
should execute the following command to activate Python:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">lang</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="mf">8.2</span><span class="o">.</span><span class="mi">0</span> <span class="n">lang</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">cpython_3</span><span class="o">.</span><span class="mf">7.4</span><span class="n">_gcc82</span>
</pre></div>
</div>
<p>There are basically three kinds of Pythons to choose. The versions with
prefix <code class="docutils literal"><span class="pre">cpython_</span></code> and those with just version numbers are compilations of the
reference implementation written in C and Python from <a class="reference external" href="https://www.python.org/downloads/">https://www.python.org/downloads/</a> also called
CPython.</p>
<p>The modules with prefix <code class="docutils literal"><span class="pre">intelpython_</span></code> are the Intel Distribution for Python.
An optimized version of the reference CPython optimized by intel for their processors.
In particular Intel Python includes MKL optimized versions of Numpy, Scipy and Scikit-Learn.</p>
<p>The modules with prefix <code class="docutils literal"><span class="pre">pypy</span></code> offers an alternative implementation of the Python programming language.
PyPy often runs faster than CPython, because PyPy is a just-in-time compiler, while CPython is an interpreter. Most Python code runs well on PyPy, except for code that depends on CPython extensions, which either does not work or incurs some overhead when run in PyPy. Functionally,</p>
</div>
<div class="section" id="packages-included">
<h2>Packages included<a class="headerlink" href="#packages-included" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="25%" />
<col width="29%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" rowspan="2">Package</th>
<th class="head" rowspan="2">Version</th>
<th class="head" rowspan="2">Package</th>
<th class="head" rowspan="2">Version</th>
</tr>
<tr class="row-even"></tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>asv</td>
<td>0.4.1</td>
<td>pandocfilters</td>
<td>1.4.2</td>
</tr>
<tr class="row-even"><td>atomicwrites</td>
<td>1.3.0</td>
<td>parso</td>
<td>0.5.1</td>
</tr>
<tr class="row-odd"><td>attrs</td>
<td>19.1.0</td>
<td>pexpect</td>
<td>4.7.0</td>
</tr>
<tr class="row-even"><td>backcall</td>
<td>0.1.0</td>
<td>pickleshare</td>
<td>0.7.5</td>
</tr>
<tr class="row-odd"><td>bleach</td>
<td>3.1.0</td>
<td>Pillow</td>
<td>6.1.0</td>
</tr>
<tr class="row-even"><td>cloudpickle</td>
<td>1.2.2</td>
<td>pip</td>
<td>19.2.3</td>
</tr>
<tr class="row-odd"><td>cycler</td>
<td>0.10.0</td>
<td>pluggy</td>
<td>0.13.0</td>
</tr>
<tr class="row-even"><td>Cython</td>
<td>0.29.13</td>
<td>prometheus-client</td>
<td>0.7.1</td>
</tr>
<tr class="row-odd"><td>dask</td>
<td>2.4.0</td>
<td>prompt-toolkit</td>
<td>2.0.9</td>
</tr>
<tr class="row-even"><td>decorator</td>
<td>4.4.0</td>
<td>ptyprocess</td>
<td>0.6.0</td>
</tr>
<tr class="row-odd"><td>defusedxml</td>
<td>0.6.0</td>
<td>py</td>
<td>1.8.0</td>
</tr>
<tr class="row-even"><td>entrypoints</td>
<td>0.3</td>
<td>pycodestyle</td>
<td>2.5.0</td>
</tr>
<tr class="row-odd"><td>flake8</td>
<td>3.7.8</td>
<td>pyflakes</td>
<td>2.1.1</td>
</tr>
<tr class="row-even"><td>h5py</td>
<td>2.10.0</td>
<td>Pygments</td>
<td>2.4.2</td>
</tr>
<tr class="row-odd"><td>imageio</td>
<td>2.5.0</td>
<td>pymongo</td>
<td>3.9.0</td>
</tr>
<tr class="row-even"><td>importlib-metadata</td>
<td>0.22</td>
<td>pyparsing</td>
<td>2.4.2</td>
</tr>
<tr class="row-odd"><td>ipykernel</td>
<td>5.1.2</td>
<td>pyrsistent</td>
<td>0.15.4</td>
</tr>
<tr class="row-even"><td>ipyparallel</td>
<td>6.2.4</td>
<td>pytest</td>
<td>5.1.2</td>
</tr>
<tr class="row-odd"><td>ipython</td>
<td>7.8.0</td>
<td>python-dateutil</td>
<td>2.8.0</td>
</tr>
<tr class="row-even"><td>ipython-genutils</td>
<td>0.2.0</td>
<td>pytz</td>
<td>2019.2</td>
</tr>
<tr class="row-odd"><td>ipywidgets</td>
<td>7.5.1</td>
<td>PyWavelets</td>
<td>1.0.3</td>
</tr>
<tr class="row-even"><td>jedi</td>
<td>0.15.1</td>
<td>pyzmq</td>
<td>18.1.0</td>
</tr>
<tr class="row-odd"><td>Jinja2</td>
<td>2.10.1</td>
<td>qtconsole</td>
<td>4.5.5</td>
</tr>
<tr class="row-even"><td>joblib</td>
<td>0.13.2</td>
<td>scikit-image</td>
<td>0.15.0</td>
</tr>
<tr class="row-odd"><td>jsonschema</td>
<td>3.0.2</td>
<td>scikit-learn</td>
<td>0.21.3</td>
</tr>
<tr class="row-even"><td>jupyter</td>
<td>1.0.0</td>
<td>scipy</td>
<td>1.3.1</td>
</tr>
<tr class="row-odd"><td>jupyter-console</td>
<td>6.0.0</td>
<td>Send2Trash</td>
<td>1.5.0</td>
</tr>
<tr class="row-even"><td>jupyter-client</td>
<td>5.3.2</td>
<td>seaborn</td>
<td>0.9.0</td>
</tr>
<tr class="row-odd"><td>jupyter-core</td>
<td>4.5.0</td>
<td>setuptools</td>
<td>41.2.0</td>
</tr>
<tr class="row-even"><td>kiwisolver</td>
<td>1.1.0</td>
<td>six</td>
<td>1.12.0</td>
</tr>
<tr class="row-odd"><td>MarkupSafe</td>
<td>1.1.1</td>
<td>sympy</td>
<td>1.4</td>
</tr>
<tr class="row-even"><td>mccabe</td>
<td>0.6.1</td>
<td>testpath</td>
<td>0.4.2</td>
</tr>
<tr class="row-odd"><td>matplotlib</td>
<td>3.1.1</td>
<td>terminado</td>
<td>0.8.2</td>
</tr>
<tr class="row-even"><td>mistune</td>
<td>0.8.4</td>
<td>toolz</td>
<td>0.10.0</td>
</tr>
<tr class="row-odd"><td>more-itertools</td>
<td>7.2.0</td>
<td>tornado</td>
<td>6.0.3</td>
</tr>
<tr class="row-even"><td>nbconvert</td>
<td>5.6.0</td>
<td>virtualenv</td>
<td>16.7.5</td>
</tr>
<tr class="row-odd"><td>mpmath</td>
<td>1.1.0</td>
<td>traitlets</td>
<td>4.3.2</td>
</tr>
<tr class="row-even"><td>nbformat</td>
<td>4.4.0</td>
<td>wcwidth</td>
<td>0.1.7</td>
</tr>
<tr class="row-odd"><td>networkx</td>
<td>2.3</td>
<td>webencodings</td>
<td>0.5.1</td>
</tr>
<tr class="row-even"><td>numpy</td>
<td>1.17.2</td>
<td>xlrd</td>
<td>1.2.0</td>
</tr>
<tr class="row-odd"><td>notebook</td>
<td>6.0.1</td>
<td>widgetsnbextension</td>
<td>3.5.1</td>
</tr>
<tr class="row-even"><td>packaging</td>
<td>19.1</td>
<td>zipp</td>
<td>0.6.0</td>
</tr>
<tr class="row-odd"><td>pandas</td>
<td>0.25.1</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>The modules with Pypy and and Intel Python includes a similar but not
identical set of packages.</p>
<p>However, you are not constrained to use just those packages. You can also
install your own or create entire new environments with the packages and
versions that you want.</p>
</div>
<div class="section" id="installing-python-packages-as-user-with-pip">
<h2>Installing python packages as user with pip<a class="headerlink" href="#installing-python-packages-as-user-with-pip" title="Permalink to this headline">¶</a></h2>
<p>An easy way to install Python modules locally (within your user
directory) is by using the <code class="docutils literal"><span class="pre">--user</span></code> flag:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="o">&lt;</span><span class="n">package_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">--user</span></code> flag directs python to install the package in a user location
rather than a system wide location where you are not allowed to alter files.</p>
<p>The user location for python packages is <code class="docutils literal"><span class="pre">$HOME/.local/lib/pythonX.Y/site-packages</span></code>,
This is generally the preferred method of locally installing new python packages as this
user site package is by default in the python library path: meaning
modules installed this way can be used as if they were installed
system-wide.</p>
</div>
<div class="section" id="installing-python-packages-with-a-custom-prefix">
<h2>Installing python packages with a custom prefix<a class="headerlink" href="#installing-python-packages-with-a-custom-prefix" title="Permalink to this headline">¶</a></h2>
<p>Another way to install Python modules locally is by using the <code class="docutils literal"><span class="pre">--target</span></code> flag:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">target</span> <span class="o">&lt;</span><span class="nb">dir</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">package_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>representing the directory location you want the package installed into.
These flags essentially do the same thing by directing Python to install
the module in the specified directory. These directories will not be
searched by default with Python. Therefore, in order to use these
modules in your Python scripts you will have to modify the <code class="docutils literal"><span class="pre">$PYTHONPATH</span></code>
environment variable to include the specified directory. Or
alternatively, modify sys.path from within your python script (for this
method, consult <a class="reference external" href="https://docs.python.org">python documentation</a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">PYTHONPATH</span><span class="o">=&lt;</span><span class="nb">dir</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="section" id="virtual-environments">
<h3>Virtual Environments<a class="headerlink" href="#virtual-environments" title="Permalink to this headline">¶</a></h3>
<p>The problem with Python User, Home and Prefix flags are that they will
all be searched secondary to the system-wide site package. This is a
problem if you are trying to install locally a different version of a
module already installed system-wide. A way to get around this is by
using <a class="reference external" href="Pythonvirtualenvironments">Python Virtual Environments</a>.</p>
</div>
</div>
<div class="section" id="installing-r-packages-in-default-directories">
<h2>Installing R Packages in default Directories<a class="headerlink" href="#installing-r-packages-in-default-directories" title="Permalink to this headline">¶</a></h2>
<p>The two usual ways to install R packages from CRAN is either executing</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">install</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="s1">&#39;&lt;Package Name&gt;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>from the R prompt. Or using the command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">R</span> <span class="n">CMD</span> <span class="n">INSTALL</span> <span class="o">&lt;</span><span class="n">package</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>from the command line. The second command only works if you have already
downloaded a copy of the package from CRAN or an external site. The
first will automatically download the package from CRAN. R will
automatically detect that you do not have permissions to write in the
system-wide R library folder and will prompt if you would like to
install in a local directory from within your home directory. This
folder will also be checked automatically when you run R for packages,
allowing you to use anything you install in this way.</p>
</div>
<div class="section" id="installing-r-packages-in-non-default-directories">
<h2>Installing R Packages in non-default directories<a class="headerlink" href="#installing-r-packages-in-non-default-directories" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-install-packages">
<h3>Using install.packages()<a class="headerlink" href="#using-install-packages" title="Permalink to this headline">¶</a></h3>
<p>To use install.packages from the R prompt, before you start R you need
to modify the R_LIBS environment variable</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">R_LIBS</span><span class="o">=&lt;</span><span class="nb">dir</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Then inside the R prompt you execute install.packages() as normal (see
above).</p>
</div>
<div class="section" id="using-r-cmd-install">
<h3>Using R CMD INSTALL<a class="headerlink" href="#using-r-cmd-install" title="Permalink to this headline">¶</a></h3>
<p>For ‘R CMD INSTALL’ command, you can specify the path with the l flag
(lowercase ‘L’)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">R</span> <span class="n">CMD</span> <span class="n">INSTALL</span> <span class="o">-</span><span class="n">l</span> <span class="o">&lt;</span><span class="nb">dir</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">package_name</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="using-installed-packages-from-non-default-directories">
<h3>Using Installed Packages from non-default directories<a class="headerlink" href="#using-installed-packages-from-non-default-directories" title="Permalink to this headline">¶</a></h3>
<p>To use locally installed packages, before you execute R you just need to
modify the R_LIBS environment variable to tell R where to search for
local packages.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>export R_LIBS=&lt;dir&gt;

Python and scientific libraries
===============================

**Module:** languages/python/2.7.13

**Module:** languages/python/3.6.0

**Path** /shared/software/languages/python/2.7.13

**Path** /shared/software/languages/python/3.6.0

**Date** January 24, 2017

Python currently has two active versions, there are some important
differences that prevent python code from running with python 3. That
means that some packages are currently no python 3 ready and some of
them will never be. Python 2 will stop being supported on 2020, so until
that happens python 2 and 3 will coexist and that is the reason why we
keep both on our cluster.

Packages included
-----------------
::

    * Python-2.7.13
    * Python-3.6.0

Libraries included
------------------

We provide a comprehensive collection of scientific libraries for
python:

Python 2.7 and 3.6
~~~~~~~~~~~~~~~~~~

::
    coverage (4.3.4)
    cycler (0.10.0)
    Cython (0.25.2)
    dask (0.13.0)
    decorator (4.0.11)
    future (0.16.0)
    h5py (2.6.0)
    ipython (5.1.0)
    ipython-genutils (0.1.0)
    matplotlib (2.0.0)
    mpmath (0.19)
    networkx (1.11)
    nose (1.3.7)
    numpy (1.12.0)
    olefile (0.44)
    pandas (0.19.2)
    pexpect (4.2.1)
    performance (0.5.1)
    pickleshare (0.7.4)
    Pillow (4.0.0)
    pip (9.0.1)
    prompt-toolkit (1.0.9)
    ptyprocess (0.5.1)
    Pygments (2.2.0)
    pymongo (3.4.0)
    pyparsing (2.1.10)
    python-dateutil (2.6.0)
    pytz (2016.10)
    scikit-image (0.12.3)
    scikit-learn (0.18.1)
    scipy (0.18.1)
    simplegeneric (0.8.1)
    six (1.10.0)
    sympy (1.0)
    toolz (0.8.2)
    traitlets (4.3.1)
    virtualenv (15.1.0)
    wcwidth (0.1.7)

Python 2.7 only
~~~~~~~~~~~~~~~

::
    appdirs (1.4.0)
    backports.shutil-get-terminal-size (1.0.0)
    enum34 (1.1.6)
    functools32 (3.2.3.post2)
    packaging (16.8)
    pathlib2 (2.2.1)
    scandir (1.4)
    setuptools (34.0.2)
    subprocess32 (3.2.7)
    wheel (0.29.0)

Python 3.6 only
~~~~~~~~~~~~~~~

::
    CacheControl (0.11.7)
    lockfile (0.12.2)
    natsort (5.0.1)
    requests (2.13.0)
    scikit-bio (0.5.1)
    setuptools (28.8.0)

Notes from building
-------------------

Python 2 and 3 where compiled with \`sqlite\` support and python 3 with
\`lzma\`. SqLite is used by IPython to record history of commands and
LZMA is a newer compression algorithm that Python 3 is linked to.

Both version were compiled with GCC 6.3.0 with Link-time optimization
(LTO) and Profile-guided optimization (PGO) to maximize performance in
production runs.

Compilation proceed with (similar for 6.3.0)::

     ../configure --prefix=/shared/software/languages/python/2.7.13
     make profile-opt
     make install

The Makefile was modified to remove the command option
``-fuse-linker-plugin``

.. literalinclude:: /_static/python.patch
</pre></div>
</div>
</div>
</div>
<div class="section" id="python-virtual-environments">
<h2>Python Virtual Environments<a class="headerlink" href="#python-virtual-environments" title="Permalink to this headline">¶</a></h2>
<p>Python virtual environments are used to build completely isolated python
workflows. Primarily they are used to solve the need for multiple
versions within python modules. Often, you might have the need to use
pkgA which needs pkgC version 1.24, but you also need pkgB which needs
pkgC version 2.1. If you use setuptools to install the packages (i.e.
pip or easy_install), you will create a dependency issue since both
versions of pkbC will be installed to the same location.</p>
<p>To resolve this, you can create python virtual environments that all
isolation of package dependencies, so you can successfully have
different versions of packages installed and tied to seperate python
interpreters. Setting up python virtual environments is easy, and using
them is no different than using python it’s self.</p>
<div class="section" id="using-virtual-environments-with-python2">
<h3>Using Virtual Environments with python2<a class="headerlink" href="#using-virtual-environments-with-python2" title="Permalink to this headline">¶</a></h3>
<p>First, load which version of python2 you would like to use as your base
python interpreter. For instance, if you want python 2.7.10, then load
the 2.7.10 python modefule. If you want to use the default system python
(v. 2.6), then you do not need to load a python modulefile. However, you
do need to load the virtualenv modulefile.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">compilers</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="mf">2.7</span><span class="o">.</span><span class="mi">10</span> <span class="n">compilers</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">virtualenv</span>
</pre></div>
</div>
<p>Then create a virtualenv directory with the ‘virtualenv’ command.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">virtualenv</span> <span class="n">workflow1</span>
</pre></div>
</div>
<p>You should now have a directory called ‘workflow1’. You can use whatever
name you want for the virtualenv, so long as you remember what directory
corresponds with what environment. You now need to simply activate the
virtualenv.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">workflow1</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>Your command prompt will now be pre-emptied by (workflow1) to remind you
that you have an activate virtualenv. You can now proceed to use python,
pip, and easy_install just as you would regularly.</p>
</div>
<div class="section" id="using-virtual-environments-with-python3">
<h3>Using Virtual Environments with python3<a class="headerlink" href="#using-virtual-environments-with-python3" title="Permalink to this headline">¶</a></h3>
<p>First, load the python3 modulefile. The python3 modulefile comes with
it’s own virtual environment utility, so you do not need to load the
virtualenv modulefile.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">compilers</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="mf">3.5</span><span class="o">.</span><span class="mi">1</span>
</pre></div>
</div>
<p>Then create a virtualenv directry with the ‘pyvenv’ command.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pyvenv</span> <span class="n">workflow1</span>
</pre></div>
</div>
<p>You should now have a directory called ‘workflow1’. You can use whatever
name you want for the virtualenv, so long as you remember what directory
corresponds with what environment. You now need to simply activate the
virtualenv.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">workflow1</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>Your command prompt will now be pre-emptied by (workflow1) to remind you
that you have an activate virtualenv. You can now proceed to use python,
pip, and easy_install just as you would regularly.</p>
</div>
<div class="section" id="activating-virtual-environments-using-the-c-shell">
<h3>Activating virtual environments using the C shell<a class="headerlink" href="#activating-virtual-environments-using-the-c-shell" title="Permalink to this headline">¶</a></h3>
<p>If you are using the shells csh or tcsh, you will not be able to source
the ‘activate’ file. Instead, you need to source the activate.csh file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">workflow1</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span><span class="o">.</span><span class="n">csh</span>
</pre></div>
</div>
</div>
<div class="section" id="using-site-wide-system-packages">
<h3>Using site-wide system packages<a class="headerlink" href="#using-site-wide-system-packages" title="Permalink to this headline">¶</a></h3>
<p>The centrally installed python interpreters (python loaded with
modelefiles), usually have some common scientific packages installed
with them by default. For instance, python 2.7.10 already has Numpy
1.9.2 and Matplotlib 1.4.2 installed. To have your virtualenv keep using
these packages so you do not need to install them in your virtualenv,
using the –system-site-packages option.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">virtualenv</span> <span class="o">--</span><span class="n">system</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span>
</pre></div>
</div>
<p>Or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pyvenv</span> <span class="o">--</span><span class="n">systems</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>Python Virtual Environments<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Python virtual environments are used to build completely isolated python
workflows. Primarily they are used to solve the need for multiple
versions within python modules. Often, you might have the need to use
pkgA which needs pkgC version 1.24, but you also need pkgB which needs
pkgC version 2.1. If you use setuptools to install the packages (i.e.
pip or easy_install), you will create a dependency issue since both
versions of pkbC will be installed to the same location.</p>
<p>To resolve this, you can create python virtual environments that all
isolation of package dependencies, so you can successfully have
different versions of packages installed and tied to seperate python
interpreters. Setting up python virtual environments is easy, and using
them is no different than using python it’s self.</p>
<div class="section" id="id2">
<h3>Using Virtual Environments with python2<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>First, load which version of python2 you would like to use as your base
python interpreter. For instance, if you want python 2.7.10, then load
the 2.7.10 python modefule. If you want to use the default system python
(v. 2.6), then you do not need to load a python modulefile. However, you
do need to load the virtualenv modulefile.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">compilers</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="mf">2.7</span><span class="o">.</span><span class="mi">10</span> <span class="n">compilers</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">virtualenv</span>
</pre></div>
</div>
<p>Then create a virtualenv directory with the ‘virtualenv’ command.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">virtualenv</span> <span class="n">workflow1</span>
</pre></div>
</div>
<p>You should now have a directory called ‘workflow1’. You can use whatever
name you want for the virtualenv, so long as you remember what directory
corresponds with what environment. You now need to simply activate the
virtualenv.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">workflow1</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>Your command prompt will now be pre-emptied by (workflow1) to remind you
that you have an activate virtualenv. You can now proceed to use python,
pip, and easy_install just as you would regularly.</p>
</div>
<div class="section" id="id3">
<h3>Using Virtual Environments with python3<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>First, load the python3 modulefile. The python3 modulefile comes with
it’s own virtual environment utility, so you do not need to load the
virtualenv modulefile.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">compilers</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="mf">3.5</span><span class="o">.</span><span class="mi">1</span>
</pre></div>
</div>
<p>Then create a virtualenv directry with the ‘pyvenv’ command.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pyvenv</span> <span class="n">workflow1</span>
</pre></div>
</div>
<p>You should now have a directory called ‘workflow1’. You can use whatever
name you want for the virtualenv, so long as you remember what directory
corresponds with what environment. You now need to simply activate the
virtualenv.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">workflow1</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>Your command prompt will now be pre-emptied by (workflow1) to remind you
that you have an activate virtualenv. You can now proceed to use python,
pip, and easy_install just as you would regularly.</p>
</div>
<div class="section" id="id4">
<h3>Activating virtual environments using the C shell<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>If you are using the shells csh or tcsh, you will not be able to source
the ‘activate’ file. Instead, you need to source the activate.csh file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">workflow1</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span><span class="o">.</span><span class="n">csh</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>Using site-wide system packages<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>The centrally installed python interpreters (python loaded with
modelefiles), usually have some common scientific packages installed
with them by default. For instance, python 2.7.10 already has Numpy
1.9.2 and Matplotlib 1.4.2 installed. To have your virtualenv keep using
these packages so you do not need to install them in your virtualenv,
using the –system-site-packages option.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">virtualenv</span> <span class="o">--</span><span class="n">system</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span>
</pre></div>
</div>
<p>Or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pyvenv</span> <span class="o">--</span><span class="n">systems</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="43.R.html" class="btn btn-neutral float-right" title="R Language" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="41.Singularity.html" class="btn btn-neutral float-left" title="Singularity Containers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, West Virginia University

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>