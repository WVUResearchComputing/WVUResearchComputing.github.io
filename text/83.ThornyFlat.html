

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Thorny Flat Cluster &mdash; WVU-RC 2022.12.15 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Go First Data-Analytics Cluster" href="84.GoFirst.html" />
    <link rel="prev" title="Spruce Knob" href="82.Spruce.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> WVU-RC
          

          
            
            <img src="../_static/ResearchComputing.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2022.12
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="10.Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="20.QuickStart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="30.BasicUsage.html">Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="40.AdvancedUsage.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="500.ScientificProgramming.html">Scientific Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="600.SoftAdmin.html">Software Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="70.DomainSpecific.html">Domain Specific Details</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="80.ClusterSpecific.html">Clusters Specifications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="81.Mountaineer.html">Mountaineer Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="82.Spruce.html">Spruce Knob</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Thorny Flat Cluster</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#resource-manager-and-system-scheduler">Resource manager and system scheduler</a></li>
<li class="toctree-l4"><a class="reference internal" href="#total-compute-resources">Total Compute Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shared-interconnect">Shared Interconnect</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hardware">Hardware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#phase-0-1-hardware">Phase 0/1 Hardware</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#queues">Queues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#research-team-queues">Research Team Queues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#standby-queue">Standby Queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="#community-node-queues">Community Node Queues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="84.GoFirst.html">Go First Data-Analytics Cluster</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="90.References.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">WVU-RC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="80.ClusterSpecific.html">Clusters Specifications</a> &raquo;</li>
        
      <li>Thorny Flat Cluster</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/text/83.ThornyFlat.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="thorny-flat-cluster">
<h1>Thorny Flat Cluster<a class="headerlink" href="#thorny-flat-cluster" title="Permalink to this headline">¶</a></h1>
<p>Thorny Flat is WVU Latest HPC Cluster.  It was deployed in Feburary 2019 and funded in large part by NSF Major Research Instrumentation (MRI) Grant Award #1726534. The cluster has a total of 6196 CPU cores spread over 170 nodes using a shared Intel Omnipath 100Gbps Interconnect. The system is a heterogeneous cluster in which there are different node types. In addition, each year a new addition is added to the cluster, which is known as a new phase. The cluster has five phases and currently is in phase 2.</p>
<a class="reference internal image-reference" href="../_images/ThornyFlat.jpg"><img alt="Thorny Flat" class="align-center" src="../_images/ThornyFlat.jpg" style="width: 150.0px; height: 300.0px;" /></a>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p><em>(This text can be used for proposals to Grant Funding Agencies)</em></p>
<p>Thorny Flat is a general-purpose High-Performance Computing (HPC) cluster.
Thorny Flat serves the HPC needs for West Virginia University (WVU) and other
higher education institutions in West Virginia. It is hosted in Pittsburgh
Supercomputer Center and was built thanks to NSF Major Research Instrumentation
(MRI) Grant Award #1726534</p>
<p>Thorny Flat is a cluster of 170 compute nodes plus 4 management nodes.
101 nodes have a dual-socket motherboard with Intel(R) Xeon(R) Gold 6138
Processors for a total of 40 cores per node.
The remaining 7 nodes have dual socket motherboard with Intel(R) Xeon(R) Gold
6126 Processors for a total of 24 cores per node. The total number of cores is
4208.</p>
<p>The 7 nodes with 24 cores also have 3 NVIDIA(R) Quadro P6000 24GB PCIe GPUs
for a total of 21 GPU cards on the cluster.
Memory on compute nodes range from 96GB to 768GB.
The machines are interconnected using Intel(R) Omnipath(R) 100 Gbps
with a blocking ratio of 5:1.</p>
<p>Thorny Flat scored 115 TeraFLOPS using jut the 101 CPU-only compute nodes.
Score was measured from the HPL Linpack benchmark.</p>
<p>Thorny Flat uses Torque and Moab for Resource Managment and Job Scheduling.
It has a variety of compilers, numerical libraries and scientific software
specifically compiled and optimized for the hardware architecture.</p>
<section id="resource-manager-and-system-scheduler">
<h3>Resource manager and system scheduler<a class="headerlink" href="#resource-manager-and-system-scheduler" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Torque v. 6.1.x</p></li>
<li><p>Moab Cluster Manager v. 9.1.x</p></li>
</ul>
</section>
<section id="total-compute-resources">
<h3>Total Compute Resources<a class="headerlink" href="#total-compute-resources" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>6196 Cores</p></li>
<li><p>159 Compute Nodes (CPU only)</p></li>
<li><p>7 Compute nodes with 3 NVIDIA P6000 (21 GPU cards)</p></li>
<li><p>3 Compute nodes with 8 NVIDIA RTX6000 (24 GPU cards)</p></li>
<li><p>1 Compute node with 2 NVIDIA A100</p></li>
<li><p>4 Management Nodes</p></li>
</ul>
</section>
<section id="shared-interconnect">
<h3>Shared Interconnect<a class="headerlink" href="#shared-interconnect" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Intel Omnipath 100 Gbps</p></li>
<li><p>5:1 Blocking</p></li>
</ul>
</section>
</section>
<section id="hardware">
<h2>Hardware<a class="headerlink" href="#hardware" title="Permalink to this headline">¶</a></h2>
<section id="phase-0-1-hardware">
<h3>Phase 0/1 Hardware<a class="headerlink" href="#phase-0-1-hardware" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://ark.intel.com/content/www/us/en/ark/products/120476/intel-xeon-gold-6138-processor-27-5m-cache-2-00-ghz.html">Intel® Xeon® Gold 6138 Processor</a></p></li>
<li><p><a class="reference external" href="https://ark.intel.com/content/www/us/en/ark/products/120483/intel-xeon-gold-6126-processor-19-25m-cache-2-60-ghz.html">Intel® Xeon® Gold 6126 Processor</a></p></li>
</ul>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 56%" />
<col style="width: 13%" />
<col style="width: 9%" />
<col style="width: 7%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Node Type</p></td>
<td><p>Description</p></td>
<td><div class="line-block">
<div class="line">Community</div>
<div class="line">Nodes</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Condo</div>
<div class="line">Nodes</div>
</div>
</td>
<td><p>Total</p></td>
</tr>
<tr class="row-even"><td><p>Small Memory</p></td>
<td><ul class="simple">
<li><p>2 x Intel® Xeon® Gold 6138 Processor (20 cores/cpu)</p></li>
<li><p>96GB memory</p></li>
<li><p>240GB SSD</p></li>
<li><p>100 Gb Omnipath</p></li>
<li><p>5 yr warranty</p></li>
</ul>
</td>
<td><p>64</p></td>
<td><p>13</p></td>
<td><p>77</p></td>
</tr>
<tr class="row-odd"><td><p>Medium Memory</p></td>
<td><ul class="simple">
<li><p>2 x Intel® Xeon® Gold 6138 Processor (20 cores/cpu)</p></li>
<li><p>192GB memory</p></li>
<li><p>240GB SSD</p></li>
<li><p>100 Gb Omnipath</p></li>
<li><p>5 yr warranty</p></li>
</ul>
</td>
<td><p>0</p></td>
<td><p>16</p></td>
<td><p>16</p></td>
</tr>
<tr class="row-even"><td><p>Large Memory</p></td>
<td><ul class="simple">
<li><p>2 x Intel® Xeon® Gold 6138 Processor (20 cores/cpu)</p></li>
<li><p>384GB memory</p></li>
<li><p>240GB SSD</p></li>
<li><p>100 Gb Omnipath</p></li>
<li><p>5 yr warranty</p></li>
</ul>
</td>
<td><p>0</p></td>
<td><p>4</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>XL Memory</p></td>
<td><ul class="simple">
<li><p>2 x Intel® Xeon® Gold 6138 Processor (20 cores/cpu)</p></li>
<li><p>768GB memory</p></li>
<li><p>240GB SSD</p></li>
<li><p>100 Gb Omnipath</p></li>
<li><p>5 yr warranty</p></li>
</ul>
</td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>GPU</p></td>
<td><ul class="simple">
<li><p>2 x Intel® Xeon® Gold 6126 Processor (12 cores/cpu)</p></li>
<li><p>3 x NVIDIA Quadro P6000 24GB PCIe GPUs,</p></li>
<li><p>96GB memory</p></li>
<li><p>240GB SSD</p></li>
<li><p>100 Gb Omnipath</p></li>
<li><p>5 yr warranty</p></li>
</ul>
</td>
<td><p>6</p></td>
<td><p>1</p></td>
<td><p>7</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="queues">
<h2>Queues<a class="headerlink" href="#queues" title="Permalink to this headline">¶</a></h2>
<p>The current state and limits of queues can be found using the qstat
command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">server</span><span class="p">:</span> <span class="n">trcis002</span><span class="o">.</span><span class="n">hpc</span><span class="o">.</span><span class="n">wvu</span><span class="o">.</span><span class="n">edu</span>

<span class="n">Queue</span>            <span class="n">Memory</span> <span class="n">CPU</span> <span class="n">Time</span> <span class="n">Walltime</span> <span class="n">Node</span>  <span class="n">Run</span> <span class="n">Que</span> <span class="n">Lm</span>  <span class="n">State</span>
<span class="o">----------------</span> <span class="o">------</span> <span class="o">--------</span> <span class="o">--------</span> <span class="o">----</span>  <span class="o">---</span> <span class="o">---</span> <span class="o">--</span>  <span class="o">-----</span>
<span class="n">standby</span>            <span class="o">--</span>      <span class="o">--</span>    <span class="mi">04</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>   <span class="o">--</span>    <span class="mi">0</span>   <span class="mi">0</span> <span class="o">--</span>   <span class="n">E</span> <span class="n">R</span>
<span class="n">comm_small_week</span>    <span class="o">--</span>      <span class="o">--</span>    <span class="mi">168</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">0</span>   <span class="o">--</span>    <span class="mi">0</span>   <span class="mi">0</span> <span class="o">--</span>   <span class="n">E</span> <span class="n">R</span>
<span class="n">comm_small_day</span>     <span class="o">--</span>      <span class="o">--</span>    <span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>   <span class="o">--</span>    <span class="mi">0</span>   <span class="mi">0</span> <span class="o">--</span>   <span class="n">E</span> <span class="n">R</span>
<span class="n">comm_gpu_week</span>      <span class="o">--</span>      <span class="o">--</span>    <span class="mi">168</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">0</span>   <span class="o">--</span>    <span class="mi">0</span>   <span class="mi">0</span> <span class="o">--</span>   <span class="n">E</span> <span class="n">R</span>
<span class="n">comm_xl_week</span>       <span class="o">--</span>      <span class="o">--</span>    <span class="mi">168</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">0</span>   <span class="o">--</span>    <span class="mi">0</span>   <span class="mi">0</span> <span class="o">--</span>   <span class="n">E</span> <span class="n">R</span>
                                           <span class="o">-----</span> <span class="o">-----</span>
                                                  <span class="mi">0</span>     <span class="mi">0</span>
</pre></div>
</div>
<p>There are three main queue types - research team queues, the standby queue, and community node queues.</p>
</section>
<section id="research-team-queues">
<h2>Research Team Queues<a class="headerlink" href="#research-team-queues" title="Permalink to this headline">¶</a></h2>
<p>Research teams that have bought their own compute nodes have private queues that link all their compute nodes together. Only users given permission from the research team’s buyer (Usually the labs PI) will have permission to directly submit jobs to these queues. While these are private queues - unused resources/compute nodes from these queues will be available to the standby queue (see below). However, per the system-wide policies, all research team’s compute nodes must be available to the research team’s users within 4 hours of job submission.  By default, these queues are regulated by first come, first serve queuing. However, individual research teams can ask for different settings for their respective queue, and should <a class="reference external" href="GettingHelp">contact</a> the RC HPC team with these requests.</p>
</section>
<section id="standby-queue">
<h2>Standby Queue<a class="headerlink" href="#standby-queue" title="Permalink to this headline">¶</a></h2>
<p>The standy queue is for using resources from research teams queues that are not currently being used. Priority on the standby queue is set by fair share queuing. This means that user priority is assigned based on a combination of the size of the job and how much system resources the user have used during the given week, with higher priority assigned to larger jobs and/or user jobs that have used fewer system resources in the week. Further, the standby queue has a 4 hour wall time.</p>
</section>
<section id="community-node-queues">
<h2>Community Node Queues<a class="headerlink" href="#community-node-queues" title="Permalink to this headline">¶</a></h2>
<p>Thorny Flat has several queues that start with the word ‘comm’. These queues are linked to the 73 compute/GPU nodes bought using NSF funding sources, and as such is open for Statewide Higher Education use, hardware/resource information can be found on the <a class="reference external" href="Systems_Spruce">Thorny Flat Systems page</a> These queues are separated by node type (i.e.  extra large memory, and gpu) and can be used by all users. Currently, these nodes are regulated by fair share queuing. This means that user priority is assigned based on a combination of the size of the job and how much system resources the user have used during the given week, with higher priority assigned to larger jobs and/or user jobs that have used less system resources in the week. Further, all community queues have a week wall time, except for the (comm_small_day). comm_small_day allows jobs up 24 hours; and, this queue class has access to a larger number of resources than than comm_small_week). These restrictions are set to prevent a single user occupying a large number of the community resources for an excessively long time.</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="84.GoFirst.html" class="btn btn-neutral float-right" title="Go First Data-Analytics Cluster" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="82.Spruce.html" class="btn btn-neutral float-left" title="Spruce Knob" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, West Virginia University

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>