Compiling Boost
===============

Boost provides free peer-reviewed portable C++ source libraries.

Compilation is a bit unusual, and requires eding a file for adding MPI support.

Downloading the code
~~~~~~~~~~~~~~~~~~~~

By the time of writting this document, the latest version was 1.70 that can be downloaded as `boost_1_70_0.tar.bz2 <https://dl.bintray.com/boostorg/release/1.70.0/source/boost_1_70_0.tar.bz2>`_

On Thorny Flat the canonical location for sources is ``/shared/src`` so download there and uncompress::

  wget https://dl.bintray.com/boostorg/release/1.70.0/source/boost_1_70_0.tar.bz2
  tar -jxvf  boost_1_70_0.tar.bz2
  cd boost_1_70_0

Bootstraping the building scripts
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Load the required modules::

  module load lang/gcc/8.2.0 parallel/hwloc/1.10.1_gcc82  parallel/openmpi/2.1.6_gcc82 libs/openblas/0.3.5_gcc82 lang/python/cpython_3.7.2_gcc82

And execute the bootstrap script::

  ./bootstrap

Edit the ``project-config.jam`` file, one of the files generated by the bootstrap script. The lines below show how to add python and MPI support::

  # Python configuration
  import python ;
  if ! [ python.configured ]
  {
      using python : 3.7 : /shared/software/lang/python/3.7.2_gcc82 ;
  }

  # MPI
  using mpi ;

Notice the space between mpi a the semicolon. That space is important.

Compile and install boost
~~~~~~~~~~~~~~~~~~~~~~~~~

Boost libraries can be compiled and installed with::

  ./b2 install --prefix=/shared/software/libs/boost/1.70_gcc82
