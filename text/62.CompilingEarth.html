

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Compiling Earth Modeling Packages &mdash; WVU-RC 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'1.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> WVU-RC
          

          
            
            <img src="../_static/ResearchComputing.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="10.Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="20.QuickStart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="30.BasicUser.html">For Basic Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="40.AdvancedUser.html">For Advanced Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="50.Developers.html">For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="60.Administrators.html">For Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="70.DomainSpecific.html">Domain Specific Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="80.ClusterSpecific.html">Clusters Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="90.References.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">WVU-RC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Compiling Earth Modeling Packages</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/text/62.CompilingEarth.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="compiling-earth-modeling-packages">
<h1>Compiling Earth Modeling Packages<a class="headerlink" href="#compiling-earth-modeling-packages" title="Permalink to this headline">¶</a></h1>
<p>These instructions describe how to compile various packages for Earth modeling, climate, weather and related applications.</p>
<div class="section" id="earth-system-modeling-framework">
<h2>Earth System Modeling Framework<a class="headerlink" href="#earth-system-modeling-framework" title="Permalink to this headline">¶</a></h2>
<p>The Earth System Modeling Framework (ESMF) is high-performance, flexible software infrastructure for building and coupling weather, climate, and related Earth science applications. The ESMF defines an architecture for composing complex, coupled modeling systems and includes data structures and utilities for developing individual models.</p>
<p>We describe how the code was compiled for Thorny Flat using Intel Compiler Suite and MPI libraries.</p>
<div class="section" id="download-the-code">
<h3>Download the code<a class="headerlink" href="#download-the-code" title="Permalink to this headline">¶</a></h3>
<p>The code can be clone with git from:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">sf</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">esmf</span><span class="o">/</span><span class="n">esmf</span>
</pre></div>
</div>
<p>The code was cloned at this at <code class="docutils literal"><span class="pre">/shared/src/meteo/esmf</span></code></p>
</div>
<div class="section" id="setting-the-environment-variables">
<h3>Setting the environment variables<a class="headerlink" href="#setting-the-environment-variables" title="Permalink to this headline">¶</a></h3>
<p>The building system is driven by a set of environment variables that need to be exported before executing make. This compilation will be done exclusively using Intel compilers. First we need to load the module for Intel 2018</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">lang</span><span class="o">/</span><span class="n">intel</span><span class="o">/</span><span class="mi">2018</span><span class="n">_u4</span>
</pre></div>
</div>
<p>The variables that need to be exported are:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">ESMF_DIR</span><span class="o">=/</span><span class="n">shared</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">meteo</span><span class="o">/</span><span class="n">esmf</span>
<span class="n">export</span> <span class="n">ESMF_COMM</span><span class="o">=</span><span class="n">intelmpi</span>
<span class="n">export</span> <span class="n">ESMF_COMPILER</span><span class="o">=</span><span class="n">intel</span>
<span class="n">export</span> <span class="n">ESMF_INSTALL_PREFIX</span><span class="o">=/</span><span class="n">shared</span><span class="o">/</span><span class="n">software</span><span class="o">/</span><span class="n">meteo</span><span class="o">/</span><span class="n">esmf</span>
</pre></div>
</div>
</div>
<div class="section" id="compiling-the-code">
<h3>Compiling the code<a class="headerlink" href="#compiling-the-code" title="Permalink to this headline">¶</a></h3>
<p>To compile the code just execute:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">make</span>
</pre></div>
</div>
<p>The compilation takes a while, notice that the first lines shows the values of several environnment variables, the 4 that we just set and a few others internal to the makefile:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">--------------------------------------------------------------</span>
<span class="n">ESMF_VERSION_STRING</span><span class="p">:</span>    <span class="mf">8.0</span><span class="o">.</span><span class="mi">0</span> <span class="n">beta</span> <span class="n">snapshot</span>
<span class="n">ESMF_8_0_0_beta_snapshot_30</span><span class="o">-</span><span class="mi">48</span><span class="o">-</span><span class="n">g8e8a213</span>
<span class="o">--------------------------------------------------------------</span>
<span class="c1"># On branch master</span>
<span class="n">nothing</span> <span class="n">to</span> <span class="n">commit</span><span class="p">,</span> <span class="n">working</span> <span class="n">directory</span> <span class="n">clean</span>
<span class="o">--------------------------------------------------------------</span>

<span class="o">--------------------------------------------------------------</span>
<span class="n">Make</span> <span class="n">version</span><span class="p">:</span>
<span class="n">GNU</span> <span class="n">Make</span> <span class="mf">3.82</span>
<span class="n">Built</span> <span class="k">for</span> <span class="n">x86_64</span><span class="o">-</span><span class="n">redhat</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="mi">2010</span>  <span class="n">Free</span> <span class="n">Software</span> <span class="n">Foundation</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span>
<span class="n">License</span> <span class="n">GPLv3</span><span class="o">+</span><span class="p">:</span> <span class="n">GNU</span> <span class="n">GPL</span> <span class="n">version</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">later</span> <span class="o">&lt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">gnu</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">gpl</span><span class="o">.</span><span class="n">html</span><span class="o">&gt;</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">free</span> <span class="n">software</span><span class="p">:</span> <span class="n">you</span> <span class="n">are</span> <span class="n">free</span> <span class="n">to</span> <span class="n">change</span> <span class="ow">and</span> <span class="n">redistribute</span> <span class="n">it</span><span class="o">.</span>
<span class="n">There</span> <span class="ow">is</span> <span class="n">NO</span> <span class="n">WARRANTY</span><span class="p">,</span> <span class="n">to</span> <span class="n">the</span> <span class="n">extent</span> <span class="n">permitted</span> <span class="n">by</span> <span class="n">law</span><span class="o">.</span>

<span class="o">--------------------------------------------------------------</span>
<span class="n">Fortran</span> <span class="n">Compiler</span> <span class="n">version</span><span class="p">:</span>
<span class="n">mpiifort</span> <span class="k">for</span> <span class="n">the</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">MPI</span> <span class="n">Library</span> <span class="mi">2018</span> <span class="n">Update</span> <span class="mi">4</span> <span class="k">for</span> <span class="n">Linux</span><span class="o">*</span>
<span class="n">Copyright</span><span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="mi">2003</span><span class="o">-</span><span class="mi">2018</span><span class="p">,</span> <span class="n">Intel</span> <span class="n">Corporation</span><span class="o">.</span>  <span class="n">All</span> <span class="n">rights</span> <span class="n">reserved</span><span class="o">.</span>
<span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">Fortran</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="mi">64</span> <span class="n">Compiler</span> <span class="k">for</span> <span class="n">applications</span> <span class="n">running</span> <span class="n">on</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="mi">64</span><span class="p">,</span> <span class="n">Version</span> <span class="mf">18.0</span><span class="o">.</span><span class="mf">5.274</span> <span class="n">Build</span> <span class="mi">20180823</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="mi">1985</span><span class="o">-</span><span class="mi">2018</span> <span class="n">Intel</span> <span class="n">Corporation</span><span class="o">.</span>  <span class="n">All</span> <span class="n">rights</span> <span class="n">reserved</span><span class="o">.</span>


<span class="o">--------------------------------------------------------------</span>
<span class="n">C</span><span class="o">++</span> <span class="n">Compiler</span> <span class="n">version</span><span class="p">:</span>
<span class="n">mpiicpc</span> <span class="k">for</span> <span class="n">the</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">MPI</span> <span class="n">Library</span> <span class="mi">2018</span> <span class="n">Update</span> <span class="mi">4</span> <span class="k">for</span> <span class="n">Linux</span><span class="o">*</span>
<span class="n">Copyright</span><span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="mi">2003</span><span class="o">-</span><span class="mi">2018</span><span class="p">,</span> <span class="n">Intel</span> <span class="n">Corporation</span><span class="o">.</span>  <span class="n">All</span> <span class="n">rights</span> <span class="n">reserved</span><span class="o">.</span>
<span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">C</span><span class="o">++</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="mi">64</span> <span class="n">Compiler</span> <span class="k">for</span> <span class="n">applications</span> <span class="n">running</span> <span class="n">on</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="mi">64</span><span class="p">,</span> <span class="n">Version</span> <span class="mf">18.0</span><span class="o">.</span><span class="mf">5.274</span> <span class="n">Build</span> <span class="mi">20180823</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="mi">1985</span><span class="o">-</span><span class="mi">2018</span> <span class="n">Intel</span> <span class="n">Corporation</span><span class="o">.</span>  <span class="n">All</span> <span class="n">rights</span> <span class="n">reserved</span><span class="o">.</span>


<span class="o">--------------------------------------------------------------</span>
<span class="n">Preprocessor</span> <span class="n">version</span><span class="p">:</span>
<span class="n">gcc</span> <span class="p">(</span><span class="n">GCC</span><span class="p">)</span> <span class="mf">4.8</span><span class="o">.</span><span class="mi">5</span> <span class="mi">20150623</span> <span class="p">(</span><span class="n">Red</span> <span class="n">Hat</span> <span class="mf">4.8</span><span class="o">.</span><span class="mi">5</span><span class="o">-</span><span class="mi">36</span><span class="p">)</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="mi">2015</span> <span class="n">Free</span> <span class="n">Software</span> <span class="n">Foundation</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">free</span> <span class="n">software</span><span class="p">;</span> <span class="n">see</span> <span class="n">the</span> <span class="n">source</span> <span class="k">for</span> <span class="n">copying</span> <span class="n">conditions</span><span class="o">.</span>  <span class="n">There</span> <span class="ow">is</span> <span class="n">NO</span>
<span class="n">warranty</span><span class="p">;</span> <span class="ow">not</span> <span class="n">even</span> <span class="k">for</span> <span class="n">MERCHANTABILITY</span> <span class="ow">or</span> <span class="n">FITNESS</span> <span class="n">FOR</span> <span class="n">A</span> <span class="n">PARTICULAR</span> <span class="n">PURPOSE</span><span class="o">.</span>


<span class="o">--------------------------------------------------------------</span>
 <span class="o">*</span> <span class="n">User</span> <span class="nb">set</span> <span class="n">ESMF</span> <span class="n">environment</span> <span class="n">variables</span> <span class="o">*</span>
<span class="n">ESMF_COMM</span><span class="o">=</span><span class="n">intelmpi</span>
<span class="n">ESMF_COMPILER</span><span class="o">=</span><span class="n">intel</span>
<span class="n">ESMF_DIR</span><span class="o">=/</span><span class="n">shared</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">meteo</span><span class="o">/</span><span class="n">esmf</span>
<span class="n">ESMF_INSTALL_PREFIX</span><span class="o">=/</span><span class="n">shared</span><span class="o">/</span><span class="n">software</span><span class="o">/</span><span class="n">meteo</span><span class="o">/</span><span class="n">esmf</span>

<span class="o">--------------------------------------------------------------</span>
<span class="o">...</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, West Virginia University

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>